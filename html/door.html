<!DOCTYPE html>
<html lang="en">
<head>
    <!--- button to go back to index.html that is on top of the door image--> 
    <a href="../index.html" class="rotate" style="position:absolute">
            <img src="../imgs/PinTest.png" style=" width:2vw" alt="">
            <span style=" font-size:1vw; left: 2vw;">home</span>
        </a>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TYT - DOOR</title>

    <link href="../style/style.css" rel="stylesheet" type="text/css" media="all">
</head>
<body class="DoorBackground">
    <!-- <div class="DoorBackground"> -->
        <!-- <img src="../imgs/DoorBackground.png"> -->
    <!-- </div> -->
    <!-- <div class="posters-container">
    </div> -->



    

    <ul class="events-container">

    </ul>

    <img src="../imgs/DoorBackground.png" class="background-image" alt="">

    <script>
        const listEL = document.querySelector('ul');
        const jDat = JSON.parse(localStorage.getItem('jDat')) || [];
        console.log(jDat);

    
        jDat.data.forEach(event => {
    if (event.DisplayWeb == true) {
        const sheetUrl = event.PosterLink || "";
        const match = sheetUrl.match(/\/d\/([^/]+)/);
        const posterID = match ? match[1] : null;
        const posterURL = posterID ? `https://drive.google.com/thumbnail?id=${posterID}` : null;

        let liHTML = `<li class="event-item">`;

        if (posterURL) {
            liHTML += `<img class="poster-image" src="${posterURL}" alt="Poster for ${event.Artists}">`;
        }

        liHTML += `
            <div class="event-details">
                <div class="event-time">
                    ${event.Date} ${event.Day} ${event.Time}
                </div>
                <div class="event-artists">
                    ${event.Artists}
                </div>
            </div>
        </li>`;

        listEL.insertAdjacentHTML('beforeend', liHTML);
    }
});
        
      
    </script>
</body>
</html>