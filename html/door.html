<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TYT - DOOR</title>

    <link href="../style/style.css" rel="stylesheet" type="text/css" media="all">
</head>
<body class="DoorBackground">
    <!-- <div class="DoorBackground"> -->
        <!-- <img src="../imgs/DoorBackground.png"> -->
    <!-- </div> -->
    <!-- <div class="posters-container">
    </div> -->



    

    <ul class="events-container">

    </ul>

    <img src="../imgs/DoorBackground.png" class="background-image" alt="">

    <script>
        const listEL = document.querySelector('ul');

        fetch('https://script.google.com/macros/s/AKfycbzfgjpvPbhil5Ifo-6NirTA1YdlKWqM7hkgEMPtvnBze_l6vqHz4RfhvWOBhh_3h_iz/exec')
        .then(res => res.json())
        .then(data => {
            data.data
            .filter(event => event.Artists && event.Artists.trim() !== "")
            .forEach(event => {
                const sheetUrl = event.PosterLink || "";
                const match = sheetUrl.match(/\/d\/([^/]+)/);
                const posterID = match ? match[1] : null;
                const posterURL = posterID ? `https://drive.google.com/thumbnail?id=${posterID}` : null;

                let liHTML = `<li class="event-item">`;

                if (posterURL) {
                liHTML += `<img class="poster-image" src="${posterURL}" alt="Poster for ${event.Artists}">`;
                }

               liHTML += `
                <div class="event-details">
                    <div class="event-time">
                    ${event.Date} ${event.Day} ${event.Time}
                    </div>
                    <div class="event-artists">
                    ${event.Artists}
                    </div>
                </div>
                </li>`;
                
                listEL.insertAdjacentHTML('beforeend', liHTML);
            });
        })
        .catch(err => {
            console.error("Fetch error:", err);
        });
    </script>
</body>
</html>